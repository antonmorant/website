<!DOCTYPE html>
<html lang="en"><head>
  <!-- Original theme (minima) -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>OneHaiku | Antón Morant Consulting</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="OneHaiku" />
<meta name="author" content="Antón Morant" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Daily haikus delivered to your phone (iOS). Personal project." />
<meta property="og:description" content="Daily haikus delivered to your phone (iOS). Personal project." />
<link rel="canonical" href="https://morant.dev/portfolio/onehaiku" />
<meta property="og:url" content="https://morant.dev/portfolio/onehaiku" />
<meta property="og:site_name" content="Antón Morant Consulting" />
<meta property="og:image" content="https://morant.dev/images/anton_bw_circle.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-06-16T17:12:03+02:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://morant.dev/images/anton_bw_circle.png" />
<meta property="twitter:title" content="OneHaiku" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Antón Morant"},"dateModified":"2023-06-16T17:12:03+02:00","datePublished":"2023-06-16T17:12:03+02:00","description":"Daily haikus delivered to your phone (iOS). Personal project.","headline":"OneHaiku","image":"https://morant.dev/images/anton_bw_circle.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://morant.dev/portfolio/onehaiku"},"url":"https://morant.dev/portfolio/onehaiku"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://morant.dev/feed.xml" title="Antón Morant Consulting" /><!-- Customizations -->

  <link rel="stylesheet" href="/css/styles.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Antón Morant Consulting</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/portfolio">Portfolio</a><a class="page-link" href="/values">Core Values</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">OneHaiku</h1>
  </header>

  <div class="post-content">
    <h2 id="the-app">The app</h2>

<p>OneHaiku is a minimalistic iOS app created with the goal of building and releasing an app from scratch. Developed as a one-man project, it has turned out to be a unique learning opportunity and a deeply satisfying one.</p>

<p>Every day, users can open OneHaiku to unveil a carefully curated haiku poem individually picked for them. The design and functionality of the app are inspired by zen simplicity, allowing users to savor the beauty of the moment and then let go and continue about their day. This creates a small space for mindfulness and reflection in their daily lives.</p>

<p>All haikus are 100% human-made and authored by myself. The app invites feedback through the ability to rate haikus, which allows enhacing future selections as well as guiding the development of new content. This makes OneHaiku not only a technical endeavor but also a personal artistic outlet.</p>

<video muted="" autoplay="" controls="" class="featured-video">
    <source src="/videos/onehaiku_preview.mp4" type="video/mp4" />
</video>

<h2 id="technical-details">Technical details</h2>

<h3 id="frontend">Frontend</h3>

<p>The front-end is built with Swift and UIKit. I originally started the app using SwiftUI, but in agreement with what I perceive to be the general community consensus, SwiftUI is not quite fully mature yet. While some of the features were really pleasant to work with (layouts, previews), I found the framework simply did not support creating animations with the level of complexity and control the project required. The initialy prototype was therefore rewritten into UIKit, which was a surprisingly easy transition. Today I am quite satisfied with this choice.</p>

<p>Additional details:</p>
<ul>
  <li>Programmatic UI: Using SnapKit for autolayout.</li>
  <li>Programmatic animations: Instead of relying on a 3rd-party tool, I took this opportunity to familiarize myself with vanilla iOS animations. The app uses UIView and CoreAnimation layer animations.</li>
  <li>Haptics: Given the deliberate simplicity of the app’s functionality, animations &amp; haptics play a key role in making the haiku reveal moment feel special.</li>
  <li>Asynchronous functions: After trying out various alternatives, async/await/throws turned out to be the most natural for the networking layer’s API.</li>
  <li>User accounts: The app deliberately does not have an onboarding or signup flow. When the user first oppens the app, a user account is automatically created for them and credentials are stored for future authentication (which also happens transparently). Logout/login functionality will be added in the future.</li>
  <li>Crash reporting: Using Sentry for crash &amp; error reporting.</li>
  <li>Caching: While the app requires backend connectivity to request a new haiku each day, it does cache it locally so that it’s available bewtween app opens.</li>
</ul>

<h3 id="backend">Backend</h3>

<p>The backend is built with Ruby on Rails. Cloud deployment and resources, including web server machines and a Postgres database, were initially managed with Heroku and later migrated to Fly.io. The backend’s main responsibilities are creation and authentication of users, selection of haikus, and storing haiku ratings.</p>

<p>The rails app provides a REST API that allows to create and authenticate users, get a user’s haiku for the day, and submit and update ratings. It also serves miscellaneous static pages requried for App Store publishing (e.g. the app’s privacy policy or customer support details).</p>

<p>To support a password-less flow, when the client creates a user account it receives an authentication token that does not expire. This token is stored locally and can be used to authenticate with the backend, which will return an access token. This is a JWT (JSON Web Token) that encodes the user id as well as the expiration date (5-minute TTL), and is cryptographically signed by the backend using a public/private key pair. The client caches the access token, uses it on all authenticated requests, and refreshes it on expiration.</p>

<p>Additional details:</p>
<ul>
  <li>Environments: Production and staging environments are kept separate to facilitate QA testing. Client debug builds use staging, while release builds use production.</li>
  <li>Continuous integration: Unit tests (RSpec) and linting (RuboCop) are automated via GitHub Actions.</li>
  <li>Security: The backend app admits only HTTPS connections and uses a custom domain with TSL certificates.</li>
  <li>Error reporting: Using sentry for error reporting and performance monitoring.</li>
  <li>Admin dashboard: The backend uses ActiveAdmin to provide an administration dashboard in order to easily create haikus and monitor status. For instance, it displays the top 5 users by count of seen haikus together with the total count of haikus. This ensures new content continues to be created timely and users don’t see repeated haikus.</li>
</ul>

<h2 id="release-status">Release status</h2>

<p>OneHaiku is now available for free in the App Store!</p>

<p><a href="https://apps.apple.com/us/app/onehaiku/id6448963020?itsct=apps_box_badge&amp;itscg=30200">
	<img src="https://tools.applemediaservices.com/api/badges/download-on-the-app-store/black/en-us?size=250x83&amp;releaseDate=1686700800" alt="Download on the App Store" style="display: block; margin: auto; border-radius: 13px; height: 60px;" />
</a></p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Antón Morant Consulting</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Antón Morant</li><li><a class="u-email" href="mailto:hello@morant.dev">hello@morant.dev</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/antonmorant"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">antonmorant</span></a></li><li><a href="https://www.linkedin.com/in/antonmorant"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">antonmorant</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Software Engineer with a passion for building beautiful things, working with people, teaching what I know and learning what I don’t.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
